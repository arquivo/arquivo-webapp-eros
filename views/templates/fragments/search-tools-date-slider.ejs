<% let startDate = new Date(1996,0,1) %>
<% let endDate = new Date() %>

<% //Get start & end dates from request parameters when available %>
<% if(typeof requestData != 'undefined'){ %>
    <% let year, month, day %>
    <% if(requestData.has('dateStart')){ %>
        <% [day,month,year] = requestData.get('dateStart').split('/'); %>
        <% startDate = new Date(year,month-1,day); %>
    <% } %>
    <% if(requestData.has('dateEnd')){ %>
        <% [day,month,year] = requestData.get('dateEnd').split('/'); %>
        <% endDate = new Date(year,month-1,day); %>
    <% } %>
<% } %>

<section id="search-tools-date-slider">
    <h4>Search Date Slider</h4>

    <!-- starts range slider container -->
    <section id="slider-range-container">
        <h4>Slider Date Calendars</h4>

        <!-- starts left calendar icon -->
        <ul id="date-container-start">
            <li class="search-calendar-year">
                <input type="text" id="start-year" class="call-datepicker-start-year calendar-year-input"
                    value="1996" readonly aria-label="Choose your starting year">
            </li>
            <li class="search-calendar-day-month">
                <input type="text" id="start-day-month" class="calendar-day-month-input" value="01 <%= t('common.shortMonths.01') %>"
                    readonly aria-label="Choose your starting day and month">
            </li>
        </ul>
        <input type="hidden" name="dateStart" id="start-date" value="<%= startDate.toLocaleDateString('pt-PT') %>">
        <!-- ends left calendar icon -->

        <!-- starts slider handles -->
        <div id="slider-range"></div>
        <!-- ends slider handles -->

        <!-- starts right calendar icon -->

        
        <ul id="date-container-end">
            <li class="search-calendar-year">
                <input type="text" id="end-year" class="call-datepicker-end-year calendar-year-input"
                    value="<%= endDate.getFullYear() %>" readonly aria-label="Choose your ending year">
            </li>
            <li class="search-calendar-day-month">
                <input type="text" id="end-day-month" class="call-datepicker calendar-day-month-input"
                    value="<%= ('0'+endDate.getDate()).slice(-2) %> <%= t('common.shortMonths.'+('0'+(endDate.getMonth()+1)).slice(-2)) %>" readonly aria-label="Choose your ending day and month">
            </li>
            
        </ul>
        <input type="hidden" name="dateEnd" id="end-date" value="<%= endDate.toLocaleDateString('pt-PT') %>">
        <!-- ends right calendar icon -->

    </section>
    <!-- ends range slider container --> 

</section>